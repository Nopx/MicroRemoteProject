package global.util;
import java.io.*;
import java.net.*;
import java.util.Enumeration;

public class IPgetter {
	public static String getPublicIP(){
		try{
			URL oracle = new URL("http://checkip.dyndns.com/");
			BufferedReader in = new BufferedReader(
			new InputStreamReader(oracle.openStream()));

			String inputLine;
			while((inputLine = in.readLine()) != null){
				inputLine = inputLine.replaceAll("[^\\d.]", "");
				if(inputLine != null)
					break;
			}
			in.close();
			if(inputLine == null)
				throw new Exception();
			return inputLine;
		}
		catch(Exception e){
			return "No Connection";
		}
	}
	@SuppressWarnings("rawtypes")
	public static String getLocalIP(){
		try{
			Enumeration e = NetworkInterface.getNetworkInterfaces();
			while(e.hasMoreElements())
			{
				NetworkInterface n = (NetworkInterface) e.nextElement();
				Enumeration ee = n.getInetAddresses();
				while (ee.hasMoreElements())
				{
						InetAddress i = (InetAddress) ee.nextElement();
						String addr = i.getHostAddress();
						if(addr.startsWith("192.168"))
							return addr;
				}
			}
				return "No Connection";
		}
		catch(Exception e){
			return "No Conection";
		}
	}
}
